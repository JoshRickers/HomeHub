<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Docker, Nginx and Let's Encrypt | Home Hub</title><meta name=keywords content="Docker,Ghost,Nginx,Let's Encrypt"><meta name=description content="In my previous blog post I explained how quick and easy it was to get a Ghost blog up and running using docker. The next step is to set up a reverse proxy and an SSL certificate. I will be using Nginx as the reverse proxy and Let&rsquo;s Encrypt as my SSL certificate provider. All with the help of Docker!
The Container There are many Docker containers available, some official and others provided by the community."><meta name=author content="Josh Rickers"><link rel=canonical href=https://homehub.tech/docker-nginx-and-lets-encrypt/><link crossorigin=anonymous href=/assets/css/stylesheet.bc1149f4a72aa4858d3a9f71462f75e5884ffe8073ea9d6d5761d5663d651e20.css integrity="sha256-vBFJ9KcqpIWNOp9xRi915YhP/oBz6p1tV2HVZj1lHiA=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://homehub.tech/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://homehub.tech/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://homehub.tech/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://homehub.tech/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://homehub.tech/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-120146011-1","auto"),ga("send","pageview"))</script><meta property="og:title" content="Docker, Nginx and Let's Encrypt"><meta property="og:description" content="In my previous blog post I explained how quick and easy it was to get a Ghost blog up and running using docker. The next step is to set up a reverse proxy and an SSL certificate. I will be using Nginx as the reverse proxy and Let&rsquo;s Encrypt as my SSL certificate provider. All with the help of Docker!
The Container There are many Docker containers available, some official and others provided by the community."><meta property="og:type" content="article"><meta property="og:url" content="https://homehub.tech/docker-nginx-and-lets-encrypt/"><meta property="article:section" content="post"><meta property="article:published_time" content="2018-06-02T19:41:23+00:00"><meta property="article:modified_time" content="2018-06-02T19:41:23+00:00"><meta property="og:site_name" content="Home Hub"><meta name=twitter:card content="summary"><meta name=twitter:title content="Docker, Nginx and Let's Encrypt"><meta name=twitter:description content="In my previous blog post I explained how quick and easy it was to get a Ghost blog up and running using docker. The next step is to set up a reverse proxy and an SSL certificate. I will be using Nginx as the reverse proxy and Let&rsquo;s Encrypt as my SSL certificate provider. All with the help of Docker!
The Container There are many Docker containers available, some official and others provided by the community."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://homehub.tech/post/"},{"@type":"ListItem","position":2,"name":"Docker, Nginx and Let's Encrypt","item":"https://homehub.tech/docker-nginx-and-lets-encrypt/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Docker, Nginx and Let's Encrypt","name":"Docker, Nginx and Let\u0027s Encrypt","description":"In my previous blog post I explained how quick and easy it was to get a Ghost blog up and running using docker. The next step is to set up a reverse proxy and an SSL certificate. I will be using Nginx as the reverse proxy and Let\u0026rsquo;s Encrypt as my SSL certificate provider. All with the help of Docker!\nThe Container There are many Docker containers available, some official and others provided by the community.","keywords":["Docker","Ghost","Nginx","Let's Encrypt"],"articleBody":"In my previous blog post I explained how quick and easy it was to get a Ghost blog up and running using docker. The next step is to set up a reverse proxy and an SSL certificate. I will be using Nginx as the reverse proxy and Let’s Encrypt as my SSL certificate provider. All with the help of Docker!\nThe Container There are many Docker containers available, some official and others provided by the community. In my search for a well maintained container I came across linuxserver.io. They provide a vast amount of containers readily available and easy to use. The container we will be using is their Let’s Encrypt container which also contains Nginx, how helpful!\nYou will need to run the following command to set everything set up.\ndocker create --cap-add=NET_ADMIN --name=letsencrypt -v /path/to/home/letsencrypt:/config -e PGID=1000 -e PUID=1000 -e EMAIL=youremail -e URL=yoururl -e SUBDOMAINS=any,subdomains -e EXTRA_DOMAINS=extradomains -p 443:443 -p 80:80 -e TZ=Europe/London -e HTTPVAL=true linuxserver/letsencrypt Fill in the command with your information and omit anything you do not require, like extra domains and sub-domains. PGID and PUID are the group and user ID for my user. If you do not know these and have not configured Docker to run without sudo then just sudo the command.\nThe next thing to do is to run the container\ndocker start letsencrypt The Reverse Proxy Now that you have the container set up and running we will need to configure the Nginx config to run the reverse proxy. Using my Ghost setup as an example.\nnano /path/to/letsencrypt/nginx/site-confs/default You will now the see the default config for Nginx. Copy and paste in the following at the end of the document.\nserver { listen 443 ssl; root /config/www; index index.html index.htm index.php; server_name yourdomainnames; ssl_certificate /config/keys/letsencrypt/fullchain.pem; ssl_certificate_key /config/keys/letsencrypt/privkey.pem; ssl_ciphers 'ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE--RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:AES:CAMELLIA:DES-CBC3-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!aECDH:!EDH-DSS-DES-CBC3-SHA:!EDH-RSA-DES-CBC3-SHA:!KRB5-DES-CBC3-SHA'; ssl_dhparam /config/nginx/dhparams.pem; ssl_prefer_server_ciphers on; client_max_body_size 0; location / { include /config/nginx/proxy.conf; proxy_pass http://youripaddress:3001; } } Make sure to replace the domain names and the IP address with your domains names and IP address.\nRestart the Docker container, wait a few seconds and try your domain in your web browser. If everything was successful you should see your Ghost blog!\n","wordCount":"357","inLanguage":"en","datePublished":"2018-06-02T19:41:23Z","dateModified":"2018-06-02T19:41:23Z","author":{"@type":"Person","name":"Josh Rickers"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://homehub.tech/docker-nginx-and-lets-encrypt/"},"publisher":{"@type":"Organization","name":"Home Hub","logo":{"@type":"ImageObject","url":"https://homehub.tech/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://homehub.tech/ accesskey=h title="Home Hub (Alt + H)"><img src=https://homehub.tech/apple-touch-icon.png alt aria-label=logo height=35>Home Hub</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://homehub.tech/categories/ title=categories><span>categories</span></a></li><li><a href=https://homehub.tech/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://homehub.tech/>Home</a>&nbsp;»&nbsp;<a href=https://homehub.tech/post/>Posts</a></div><h1 class=post-title>Docker, Nginx and Let's Encrypt</h1><div class=post-meta><span title='2018-06-02 19:41:23 +0000 UTC'>June 2, 2018</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;357 words&nbsp;·&nbsp;Josh Rickers&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/post/docker-nginx-and-lets-encrypt.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><p>In my previous blog post I explained how quick and easy it was to get a Ghost blog up and running using docker. The next step is to set up a reverse proxy and an SSL certificate. I will be using Nginx as the reverse proxy and Let&rsquo;s Encrypt as my SSL certificate provider. All with the help of Docker!</p><h2 id=the-container>The Container<a hidden class=anchor aria-hidden=true href=#the-container>#</a></h2><p>There are many Docker containers available, some official and others provided by the community. In my search for a well maintained container I came across <a href=https://www.linuxserver.io/>linuxserver.io</a>. They provide a vast amount of containers readily available and easy to use. The container we will be using is their <a href=https://hub.docker.com/r/linuxserver/letsencrypt/>Let&rsquo;s Encrypt container</a> which also contains Nginx, how helpful!</p><p>You will need to run the following command to set everything set up.</p><pre tabindex=0><code>docker create --cap-add=NET_ADMIN --name=letsencrypt -v /path/to/home/letsencrypt:/config -e PGID=1000 -e PUID=1000  -e EMAIL=youremail -e URL=yoururl -e SUBDOMAINS=any,subdomains -e EXTRA_DOMAINS=extradomains -p 443:443 -p 80:80 -e TZ=Europe/London -e HTTPVAL=true linuxserver/letsencrypt
</code></pre><p>Fill in the command with your information and omit anything you do not require, like extra domains and sub-domains. PGID and PUID are the group and user ID for my user. If you do not know these and have not configured Docker to run without sudo then just sudo the command.</p><p>The next thing to do is to run the container</p><pre tabindex=0><code>docker start letsencrypt
</code></pre><h2 id=the-reverse-proxy>The Reverse Proxy<a hidden class=anchor aria-hidden=true href=#the-reverse-proxy>#</a></h2><p>Now that you have the container set up and running we will need to configure the Nginx config to run the reverse proxy. Using my Ghost setup as an example.</p><pre tabindex=0><code>nano /path/to/letsencrypt/nginx/site-confs/default
</code></pre><p>You will now the see the default config for Nginx. Copy and paste in the following at the end of the document.</p><pre tabindex=0><code>server {
       listen 443 ssl;

       root /config/www;
       index index.html index.htm index.php;

       server_name yourdomainnames;

       ssl_certificate /config/keys/letsencrypt/fullchain.pem;
       ssl_certificate_key /config/keys/letsencrypt/privkey.pem;
       ssl_ciphers &#39;ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE--RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:AES:CAMELLIA:DES-CBC3-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!aECDH:!EDH-DSS-DES-CBC3-SHA:!EDH-RSA-DES-CBC3-SHA:!KRB5-DES-CBC3-SHA&#39;;
       ssl_dhparam /config/nginx/dhparams.pem;
       ssl_prefer_server_ciphers on;

       client_max_body_size 0;

       location / {
               include /config/nginx/proxy.conf;
               proxy_pass http://youripaddress:3001;
       }
}
</code></pre><p>Make sure to replace the domain names and the IP address with your domains names and IP address.</p><p>Restart the Docker container, wait a few seconds and try your domain in your web browser. If everything was successful you should see your Ghost blog!</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://homehub.tech/tags/docker/>Docker</a></li><li><a href=https://homehub.tech/tags/ghost/>Ghost</a></li><li><a href=https://homehub.tech/tags/nginx/>Nginx</a></li><li><a href=https://homehub.tech/tags/lets-encrypt/>Let's Encrypt</a></li></ul><nav class=paginav><a class=prev href=https://homehub.tech/automate-tv-shows-with-sonarr/><span class=title>« Prev</span><br><span>Automate TV Shows with Sonarr, RuTorrent and Jackett</span></a>
<a class=next href=https://homehub.tech/installing-ghost-on-docker-in-2018/><span class=title>Next »</span><br><span>Installing Ghost on Docker in 2018</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://homehub.tech/>Home Hub</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>